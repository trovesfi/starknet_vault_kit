generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Report {
  id              String   @id @default(uuid())
  blockNumber     Int
  timestamp       Int
  transactionHash String

  newEpoch                     BigInt
  newHandledEpochLen           BigInt
  totalSupply                  BigInt
  totalAssets                  BigInt
  managementFeeShares          BigInt
  performanceFeeShares         BigInt
  
  createdAt DateTime @default(now())

  @@unique([newEpoch])
}


model RedeemRequested {
  id              String   @id @default(uuid())
  blockNumber     Int
  timestamp       Int
  transactionHash String 

  owner           String
  receiver        String
  shares          BigInt
  assets          BigInt
  redeemId        BigInt
  epoch           BigInt

  createdAt       DateTime @default(now())

  @@unique([redeemId])
}

model RedeemClaimed {
  id              String   @id @default(uuid())
  blockNumber     Int
  timestamp       Int
  transactionHash String

  receiver                String
  redeemRequestNominal    BigInt
  assets                  BigInt
  redeemId               BigInt
  epoch                  BigInt

  createdAt       DateTime @default(now())

  @@unique([redeemId])
}

model IndexerStatus {
  id                    Int      @id @default(1)
  lastBlock      Int
  updatedAt      DateTime @updatedAt
}
